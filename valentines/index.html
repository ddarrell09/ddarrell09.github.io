<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ðŸ’Œ</title>
  <style>
    :root{
      --bg1:#120a1f;
      --bg2:#0b1026;
      --glass: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.18);
      --pink:#ff4d8d;
      --pink2:#ff7aa9;
      --text:#f6f2ff;
      --muted: rgba(255,255,255,.72);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background: radial-gradient(1200px 700px at 20% 20%, #3d104e 0%, transparent 55%),
                  radial-gradient(1100px 650px at 90% 30%, #112a6b 0%, transparent 55%),
                  linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* floating hearts */
    .hearts{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.55;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(255,77,141,.25) 0 2px, transparent 3px),
        radial-gradient(circle at 70% 20%, rgba(255,122,169,.22) 0 2px, transparent 3px),
        radial-gradient(circle at 85% 70%, rgba(255,77,141,.18) 0 2px, transparent 3px),
        radial-gradient(circle at 30% 80%, rgba(255,122,169,.16) 0 2px, transparent 3px);
      animation: floatBg 8s ease-in-out infinite alternate;
    }
    @keyframes floatBg { from{ transform: translateY(0);} to{ transform: translateY(-18px);} }

    /* pages + fade transitions */
    .page{
      min-height:100vh;
      display:none;
      padding: 22px 14px;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity .28s ease, transform .28s ease;
    }
    .page.active{ display:block; }
    .page.show{ opacity:1; transform: translateY(0); }

    .wrap{
      max-width: 520px;
      margin: 0 auto;
      padding-bottom: 34px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 16px;
    }

    .title{
      text-align:center;
      font-weight: 850;
      font-size: clamp(26px, 6vw, 34px);
      letter-spacing: .2px;
      margin: 6px 0 14px;
    }
    .sub{
      text-align:center;
      color: var(--muted);
      margin-top: -6px;
      margin-bottom: 14px;
      font-size: 14px;
    }

    .btn{
      border:0;
      border-radius: 999px;
      padding: 12px 18px;
      font-weight: 800;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{ transform: scale(.98); filter: brightness(.95); }

    .btnPink{
      background: linear-gradient(180deg, var(--pink), var(--pink2));
      color: #180010;
      box-shadow: 0 10px 22px rgba(255,77,141,.25);
    }
    .btnGhost{
      background: rgba(255,255,255,.10);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.18);
    }

    .hint{
      margin-top:10px;
      text-align:center;
      font-size: 13px;
      color: rgba(255,255,255,.55);
      min-height: 18px; /* space even when blank */
    }

    /* --- LOCK (YouTube frame + password) --- */
    .lockFrame{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.25);
      overflow:hidden;
      position:relative;
      aspect-ratio: 16 / 9;
      width:100%;
    }
    .ytShell{
      position:absolute; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.20);
    }
    .ytInner{
      position:absolute; inset:0;
    }
    .ytInner iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
    }
    .videoOverlay{
      position:absolute; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      flex-direction:column;
      background: linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.55));
      transition: opacity .18s ease;
      z-index: 2;
    }
    .videoOverlay.hide{
      opacity: 0;
      pointer-events:none;
    }

    .lockRow{
      display:flex;
      gap:10px;
      margin-top: 14px;
      align-items:center;
    }
    .input{
      flex:1;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      outline:none;
      background: rgba(0,0,0,.22);
      color: var(--text);
      font-size: 16px;
    }

    /* --- QUIZ --- */
    .quizTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 10px;
      gap: 10px;
    }
    .pill{
      font-size: 13px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.82);
      white-space:nowrap;
    }
    .qText{
      font-size: 18px;
      font-weight: 850;
      margin: 4px 0 12px;
      text-align:left;
    }
    .choices{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .choice{
      text-align:left;
      width:100%;
      padding: 14px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      font-weight: 750;
      cursor:pointer;
    }
    .choice.correct{
      border-color: rgba(92,255,170,.55);
      background: rgba(92,255,170,.18);
    }
    .choice.wrong{
      border-color: rgba(255,110,110,.55);
      background: rgba(255,110,110,.12);
    }

    /* --- VALENTINE --- */
    .center{ text-align:center; }
    .rowBtns{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 12px;
    }
    .blurOut{
      filter: blur(8px);
      opacity: .55;
      transform: scale(.98);
      transition: filter .25s ease, opacity .25s ease, transform .25s ease;
      pointer-events:none;
    }

    /* --- POLAROIDS: vertical stacked collage --- */
    .polaroidPage{ padding-top: 18px; }
    .stack{
      position:relative;
      display:flex;
      flex-direction:column;
      gap: 18px;
      padding-bottom: 14px;
    }
    .pol{
      width: 100%;
      border-radius: 18px;
      background:#f5f5f7;
      padding: 12px;
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      border: 1px solid rgba(0,0,0,.18);
      transform: rotate(var(--rot, 0deg));
    }
    .polInner{
      background:#fff;
      border-radius: 12px;
      overflow:hidden;
    }
    .pol img{
      width:100%;
      display:block;
      aspect-ratio: 4 / 5;
      object-fit: cover;
      background:#ddd;
    }
    .polCap{
      padding: 10px 8px 2px;
      color:#111;
      font-weight: 900;
      text-align:center;
      font-size: 14px;
    }
    .polNote{
      color: rgba(0,0,0,.65);
      font-weight: 650;
      text-align:center;
      font-size: 12px;
      padding-bottom: 2px;
    }

    .finalLetter{
      margin-top: 18px;
    }
    .finalLetter h2{
      margin: 0 0 10px;
      font-size: 22px;
      text-align:center;
    }
    .finalLetter p{
      color: rgba(255,255,255,.88);
      line-height: 1.6;
      font-weight: 650;
      margin: 0;
      white-space: pre-line;
    }

    /* confetti canvas */
    #confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index: 50;
    }

    @media (min-width: 720px){
      .page{ padding: 28px 18px; }
      .pol{ max-width: 520px; margin: 0 auto; }
    }
  </style>
</head>

<body>
  <div class="hearts"></div>
  <canvas id="confetti"></canvas>

  <!-- ===== PAGE 1: LOCK ===== -->
  <section id="page-lock" class="page active">
    <div class="wrap">
      <div class="card">
        <div class="center" style="margin-bottom:10px;">ðŸ”’</div>

        <div class="lockFrame">
          <div id="ytInner" class="ytInner"></div>

          <div id="videoOverlay" class="videoOverlay">
            <button id="tapPlay" class="btn btnPink">Tap to play</button>
            <div style="font-size:12px;color:rgba(255,255,255,.72);text-align:center;padding:0 12px;">
              (Phones block autoplay â€” tap once and itâ€™ll start.)
            </div>
          </div>
        </div>

        <div class="lockRow">
          <input id="pw" class="input" type="password" placeholder="Password" autocomplete="off" />
          <button id="enterBtn" class="btn btnPink" style="padding:12px 16px;">Enter</button>
        </div>

        <!-- NO HINTS (blank) -->
        <div id="lockMsg" class="hint"></div>
      </div>
    </div>
  </section>

  <!-- ===== PAGE 2: QUIZ ===== -->
  <section id="page-quiz" class="page">
    <div class="wrap">
      <div class="card">
        <div class="quizTop">
          <div class="pill" id="qCount">Question 1 / 6</div>
          <div class="pill" id="scorePill">âœ… 0</div>
        </div>
        <div id="qText" class="qText"></div>
        <div id="choices" class="choices"></div>
        <div class="hint" id="quizMsg"></div>
      </div>
    </div>
  </section>

  <!-- ===== PAGE 3: VALENTINE ===== -->
  <section id="page-val" class="page">
    <div class="wrap">
      <div id="valCard" class="card center">
        <div class="title">Will you be my Valentine? ðŸ’Œ</div>
        <div class="sub">Hey Shella, I made this for you.</div>

        <!-- GIPHY embed (your exact iframe) -->
        <div style="display:flex;justify-content:center;margin: 6px 0 10px;">
          <iframe
            src="https://giphy.com/embed/8QbwUh40Hl96yMgvOx"
            width="270"
            height="480"
            style="border-radius:18px; border:1px solid rgba(255,255,255,.16); background: rgba(0,0,0,.12);"
            frameBorder="0"
            class="giphy-embed"
            allowFullScreen>
          </iframe>
        </div>

        <div class="rowBtns">
          <button id="yesBtn" class="btn btnPink">Yes ðŸ’–</button>
          <button id="noBtn" class="btn btnGhost">No ðŸ˜­</button>
        </div>
        <div class="hint" id="valMsg"></div>
      </div>
    </div>
  </section>

  <!-- ===== PAGE 4: POLAROIDS + LETTER ===== -->
  <section id="page-pol" class="page polaroidPage">
    <div class="wrap">
      <div class="title" style="margin-bottom:8px;">ðŸ“¸ Us</div>
      <div class="sub">Scroll down ðŸ’—</div>

      <div id="stack" class="stack"></div>

      <div class="card finalLetter">
        <h2>For you ðŸ’ž</h2>
        <p id="finalLetterText">
Shella, I love you so much.
Iâ€™m really thankful for you.

Iâ€™ve been trying my hardest to keep up and itâ€™s been hard, but youâ€™ve still been right here with me â€” especially when Iâ€™m at my lowest. I love you for that.

This is a hard time for me with everything going on, but you make it feel lighter just by being you.

I canâ€™t wait to live life with you and be happy. ðŸ’˜
        </p>
      </div>
    </div>
  </section>

  <!-- music (starts after YES) -->
  <audio id="bgMusic" src="love.mp3" preload="auto" loop></audio>

  <script>
    // ===== SETTINGS =====
    // Accept grape OR Grape (case-insensitive)
    const PASSWORD = "grape";

    // YouTube video hint (loaded only after tap)
    const YT_EMBED_SRC = "https://www.youtube.com/embed/pZ663EJwWPY?si=oE1-oCG5fCIdDEA6";

    // 6 questions (random order)
    // Love language question: ANY choice counts as correct
    const QUESTIONS = [
      {
        q: "What was our first kids name",
        options: ["Tobi", "SJ", "Lando", "Molly"],
        correct: "Tobi"
      },
      {
        q: "What is my love language",
        options: ["Acts of Service", "Quality Time", "Physical Touch", "Words of Affirmation"],
        correct: "__ANY__"
      },
      {
        q: "What is our favorite snack together",
        options: ["M&Ms", "Puffcorn", "Popcorn", "Gummy Bears"],
        correct: "Puffcorn"
      },
      {
        q: "What is our anniversary",
        options: ["June 30", "June 14", "September 30", "June 29"],
        correct: "June 30"
      },
      {
        q: "Where was our first hike",
        options: ["Mount Rainier", "Wallace Falls", "Rattlesnake", "Marymere Falls"],
        correct: "Mount Rainier"
      },
      {
        q: "What is our favorite show",
        options: ["Community", "Superstore", "Snowfall", "The Office"],
        correct: "Community"
      }
    ];

    // Your actual files in /valentines (with captions/notes)
    const POLAROIDS = [
      { file:"DSCF0007.jpeg", caption:"First time we saw each other", note:"It started simpleâ€¦ and turned into everything." },
      { file:"DSCF0006.jpeg", caption:"After a good time", note:"Same vibe â€” just more love." },
      { file:"IMG_9470.jpeg", caption:"Ocean Shores", note:"You made the whole trip feel like home." },

      { file:"17503EC1-5ADC-4A76-B94A-68E07BB33A02.jpeg", caption:"Our first hike", note:"Youâ€™re my favorite hiking partner." },
      { file:"9325070F-2DEF-4452-9E9E-52F35D24A94A.jpeg", caption:"The plushie mission", note:"We really fought for that win ðŸ˜‚" },
      { file:"DEF3A7C1-335A-45B3-8A2F-AB042E139543.jpeg", caption:"Mid hot pot spot", note:"Even the simple moments feel big with you." },

      { file:"IMG_0233.jpeg", caption:"Scary hike", note:"Even when itâ€™s sketchyâ€¦ we got it together." },
      { file:"IMG_0411.jpeg", caption:"Us", note:"My favorite place is next to you." },
      { file:"IMG_0418.jpeg", caption:"Little date", note:"I love our random moments." },
      { file:"IMG_0420.jpeg", caption:"Another day", note:"Your smile is literally my weakness." },
      { file:"IMG_4002.jpeg", caption:"Good vibes", note:"Same energy, always." },
      { file:"IMG_4288.jpeg", caption:"Cuties", note:"You + me = perfect." },
      { file:"IMG_5482.jpeg", caption:"More memories", note:"Iâ€™m grateful for every moment." },
      { file:"IMG_6404.jpeg", caption:"Together", note:"Forever feels right with you." }
    ];

    // ===== HELPERS =====
    const $ = (id) => document.getElementById(id);

    const showPage = (id) => {
      // hide all
      document.querySelectorAll(".page").forEach(p => {
        p.classList.remove("active");
        p.classList.remove("show");
      });

      // show target
      const el = $(id);
      el.classList.add("active");
      requestAnimationFrame(() => el.classList.add("show"));

      window.scrollTo({ top: 0, behavior: "instant" });
    };

    const shuffle = (arr) => {
      const a = arr.slice();
      for (let i=a.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    };

    // ===== LOCK: tap to load YouTube =====
    const overlay = $("videoOverlay");
    const tapPlay = $("tapPlay");
    const ytInner = $("ytInner");

    function loadYouTubeAndPlay(){
      // Build iframe only after user tap (helps on mobile)
      ytInner.innerHTML = `
        <iframe
          src="${YT_EMBED_SRC}&autoplay=1&mute=0"
          title="YouTube video player"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen></iframe>
      `;
      overlay.classList.add("hide");
    }

    tapPlay.addEventListener("click", () => {
      loadYouTubeAndPlay();
    });

    // ===== LOCK -> QUIZ =====
    $("enterBtn").addEventListener("click", () => {
      const val = ($("pw").value || "").trim().toLowerCase();
      if (val === PASSWORD){
        $("lockMsg").textContent = "";
        startQuiz();
        showPage("page-quiz");
      } else {
        $("lockMsg").textContent = "Nope.";
        $("pw").value = "";
        $("pw").focus();
      }
    });

    $("pw").addEventListener("keydown", (e) => {
      if (e.key === "Enter") $("enterBtn").click();
    });

    // ===== QUIZ LOGIC =====
    let quiz = [];
    let qi = 0;
    let score = 0;
    let locked = false;

    function startQuiz(){
      quiz = shuffle(QUESTIONS);
      qi = 0;
      score = 0;
      locked = false;
      $("scorePill").textContent = "âœ… 0";
      renderQuestion();
    }

    function renderQuestion(){
      $("quizMsg").textContent = "";
      $("qCount").textContent = `Question ${qi+1} / ${quiz.length}`;
      $("qText").textContent = quiz[qi].q;

      const opts = shuffle(quiz[qi].options);
      const box = $("choices");
      box.innerHTML = "";

      opts.forEach(opt => {
        const b = document.createElement("button");
        b.className = "choice";
        b.textContent = opt;
        b.addEventListener("click", () => handleAnswer(b, opt));
        box.appendChild(b);
      });
    }

    function isCorrect(qObj, picked){
      if (qObj.correct === "__ANY__") return true;
      return picked === qObj.correct;
    }

    function handleAnswer(btn, opt){
      if (locked) return;
      locked = true;

      const qObj = quiz[qi];
      if (isCorrect(qObj, opt)){
        btn.classList.add("correct");
        score++;
        $("scorePill").textContent = `âœ… ${score}`;
        confettiBurst();

        setTimeout(() => {
          qi++;
          if (qi >= quiz.length){
            showPage("page-val");
          } else {
            locked = false;
            renderQuestion();
          }
        }, 650);
      } else {
        btn.classList.add("wrong");
        $("quizMsg").textContent = "Try again ðŸ™‚";
        setTimeout(() => {
          btn.classList.remove("wrong");
          locked = false;
        }, 600);
      }
    }

    // ===== VALENTINE -> POLAROIDS =====
    const music = $("bgMusic");
    const valMsg = $("valMsg");
    const valCard = $("valCard");

    $("noBtn").addEventListener("click", () => {
      valMsg.textContent = "Wrong button ðŸ˜­ try again";
    });

    $("yesBtn").addEventListener("click", async () => {
      valMsg.textContent = "";

      // Blur the YES page before transition
      valCard.classList.add("blurOut");

      // Start music only after YES (phone-friendly)
      try { await music.play(); } catch(e) {}

      // build + transition
      buildStack();
      setTimeout(() => showPage("page-pol"), 320);
    });

    function buildStack(){
      const stack = $("stack");
      stack.innerHTML = "";

      const items = shuffle(POLAROIDS);

      items.forEach((item, idx) => {
        const card = document.createElement("div");
        card.className = "pol";

        // give each one a slight tilt like a stack
        const rot = (Math.random() * 6 - 3); // -3deg to +3deg
        card.style.setProperty("--rot", rot.toFixed(2) + "deg");

        card.innerHTML = `
          <div class="polInner">
            <img src="${item.file}" alt="photo" loading="lazy" />
          </div>
          <div class="polCap">${item.caption || ""}</div>
          <div class="polNote">${item.note || ""}</div>
        `;
        stack.appendChild(card);
      });
    }

    // ===== CONFETTI =====
    const confettiCanvas = $("confetti");
    const ctx = confettiCanvas.getContext("2d");
    let confettiPieces = [];

    function resizeCanvas(){
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function confettiBurst(){
      const W = confettiCanvas.width;
      const H = confettiCanvas.height;
      const count = 120;
      const x = W * 0.5;
      const y = H * 0.25;

      for (let i=0; i<count; i++){
        confettiPieces.push({
          x, y,
          vx: (Math.random()*6 - 3),
          vy: (Math.random()*-9 - 3),
          g: 0.18 + Math.random()*0.12,
          s: 4 + Math.random()*5,
          r: Math.random()*Math.PI,
          vr: (Math.random()*0.2 - 0.1),
          life: 70 + Math.random()*40
        });
      }
      if (!animating) animate();
    }

    let animating = false;
    function animate(){
      animating = true;
      ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);

      confettiPieces.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.vy += p.g;
        p.r += p.vr;
        p.life -= 1;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.r);
        ctx.globalAlpha = Math.max(0, Math.min(1, p.life/110));
        const hue = Math.floor(Math.random()*360);
        ctx.fillStyle = `hsl(${hue} 90% 70%)`;
        ctx.fillRect(-p.s/2, -p.s/2, p.s, p.s);
        ctx.restore();
      });

      confettiPieces = confettiPieces.filter(p => p.life > 0 && p.y < confettiCanvas.height + 40);

      if (confettiPieces.length){
        requestAnimationFrame(animate);
      } else {
        animating = false;
        ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
      }
    }

    // start with page-lock fade-in
    requestAnimationFrame(() => $("page-lock").classList.add("show"));
  </script>
</body>
</html>
